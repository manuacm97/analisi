<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisi Scommesse</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet">
    <!-- Aggiunte per PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#2c6e49">
</head>
<body>
    <div class="container">
        <h1>Analisi Scommesse Sportive</h1>

        <!-- Form di Input -->
        <form id="formAnalisi">
            <div class="nomi-squadre">
                <label>Squadra Casa: <input type="text" id="nomeSquadraA" required></label>
                <button type="button" onclick="cercaTransfermarkt()">Cerca su Transfermarkt</button>
                <label>Squadra Trasferta: <input type="text" id="nomeSquadraB" required></label>
            </div>

            <div class="tabelle-affiancate">
                <!-- Squadra A -->
                <section class="squadra">
                    <h2 id="titoloSquadraA">Squadra A (Casa)</h2>
                    <table id="squadraA">
                        <thead>
                            <tr>
                                <th>Gol Fatti</th>
                                <th>Gol Subiti</th>
                                <th>Esito</th>
                                <th>C/T</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><select name="golFattiA1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA1"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiA2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA2"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiA3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA3"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiA4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA4"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiA5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA5"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiA6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiA6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaA6"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="parametri">
                        <label>Posizione: <input type="number" name="posizioneA" min="1" required></label>
                        <label>Tot. Squadre: <input type="number" name="totSquadreA" min="1" required></label>
                        <label>Squalifiche (0-5): <input type="number" name="squalificheA" min="0" max="5" required></label>
                        <label>Coefficiente: <input type="number" name="coeffA" min="0" step="0.1" value="1.0" required></label>
                    </div>
                </section>

                <!-- Squadra B -->
                <section class="squadra">
                    <h2 id="titoloSquadraB">Squadra B (Trasferta)</h2>
                    <table id="squadraB">
                        <thead>
                            <tr>
                                <th>Gol Fatti</th>
                                <th>Gol Subiti</th>
                                <th>Esito</th>
                                <th>C/T</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><select name="golFattiB1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB1"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiB2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB2"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB2"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiB3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB3"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB3"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiB4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB4"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB4"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiB5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB5"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB5"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                            <tr>
                                <td><select name="golFattiB6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><select name="golSubitiB6"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td>
                                <td><span class="esito"></span></td>
                                <td><select name="casaTrasfertaB6"><option value="C">C</option><option value="T">T</option></select></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="parametri">
                        <label>Posizione: <input type="number" name="posizioneB" min="1" required></label>
                        <label>Tot. Squadre: <input type="number" name="totSquadreB" min="1" required></label>
                        <label>Squalifiche (0-5): <input type="number" name="squalificheB" min="0" max="5" required></label>
                        <label>Coefficiente: <input type="number" name="coeffB" min="0" step="0.1" value="1.0" required></label>
                    </div>
                </section>
            </div>

            <!-- Pulsanti -->
            <div class="buttons">
                <button type="button" onclick="calcolaRisultati()">Calcola Risultati</button>
                <button type="button" onclick="cancellaDati()">Cancella Dati</button>
                <button type="button" onclick="ricaricaDati()">Ricarica Ultimi Dati</button>
                <button type="button" onclick="mostraPartitePrecedenti()">Mostra Partite Precedenti</button>
                <button type="button" onclick="eliminaPartiteSalvati()">Elimina Partite Salvate</button>
                <button type="button" onclick="giocataScelta()">Giocata Scelta</button>
            </div>
        </form>

        <!-- Output -->
        <section id="risultati">
            <h2>Risultati</h2>
            <div class="tabelle-risultati">
                <table id="risultatiSquadraA">
                    <thead>
                        <tr><th colspan="2" id="nomeRisultatiA">Squadra A</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Gol Fatti (Complessivo)</td><td><span id="golFattiA"></span></td></tr>
                        <tr><td>Gol Subiti (Complessivo)</td><td><span id="golSubitiA"></span></td></tr>
                        <tr><td>% Vittorie (Complessivo)</td><td><span id="vittorieA"></span></td></tr>
                        <tr><td>% Pareggi (Complessivo)</td><td><span id="pareggiA"></span></td></tr>
                        <tr><td>% Sconfitte (Complessivo)</td><td><span id="sconfitteA"></span></td></tr>
                        <tr><td>Gol Fatti (Casa)</td><td><span id="golFattiCasaA"></span></td></tr>
                        <tr><td>Gol Subiti (Casa)</td><td><span id="golSubitiCasaA"></span></td></tr>
                        <tr><td>% Vittorie (Casa)</td><td><span id="vittorieCasaA"></span></td></tr>
                        <tr><td>% Pareggi (Casa)</td><td><span id="pareggiCasaA"></span></td></tr>
                        <tr><td>% Sconfitte (Casa)</td><td><span id="sconfitteCasaA"></span></td></tr>
                        <tr><td>Gol Fatti (Trasferta)</td><td><span id="golFattiTrasfertaA"></span></td></tr>
                        <tr><td>Gol Subiti (Trasferta)</td><td><span id="golSubitiTrasfertaA"></span></td></tr>
                        <tr><td>% Vittorie (Trasferta)</td><td><span id="vittorieTrasfertaA"></span></td></tr>
                        <tr><td>% Pareggi (Trasferta)</td><td><span id="pareggiTrasfertaA"></span></td></tr>
                        <tr><td>% Sconfitte (Trasferta)</td><td><span id="sconfitteTrasfertaA"></span></td></tr>
                        <tr><td>Peso Posizione</td><td><span id="pesoPosizioneA"></span></td></tr>
                        <tr><td>Forma Recente</td><td><span id="formaA"></span></td></tr>
                        <tr><td>Punteggio Generale</td><td><span id="punteggioA"></span></td></tr>
                        <tr><td>Punteggio Casa/Trasferta</td><td><span id="punteggioCasaA"></span></td></tr>
                        <tr><td>Punteggio Totale</td><td><span id="punteggioTotaleA"></span></td></tr>
                        <tr><td>Punteggio Coppe</td><td><span id="punteggioCoppeA"></span></td></tr>
                    </tbody>
                </table>
                <table id="risultatiSquadraB">
                    <thead>
                        <tr><th colspan="2" id="nomeRisultatiB">Squadra B</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Gol Fatti (Complessivo)</td><td><span id="golFattiB"></span></td></tr>
                        <tr><td>Gol Subiti (Complessivo)</td><td><span id="golSubitiB"></span></td></tr>
                        <tr><td>% Vittorie (Complessivo)</td><td><span id="vittorieB"></span></td></tr>
                        <tr><td>% Pareggi (Complessivo)</td><td><span id="pareggiB"></span></td></tr>
                        <tr><td>% Sconfitte (Complessivo)</td><td><span id="sconfitteB"></span></td></tr>
                        <tr><td>Gol Fatti (Casa)</td><td><span id="golFattiCasaB"></span></td></tr>
                        <tr><td>Gol Subiti (Casa)</td><td><span id="golSubitiCasaB"></span></td></tr>
                        <tr><td>% Vittorie (Casa)</td><td><span id="vittorieCasaB"></span></td></tr>
                        <tr><td>% Pareggi (Casa)</td><td><span id="pareggiCasaB"></span></td></tr>
                        <tr><td>% Sconfitte (Casa)</td><td><span id="sconfitteCasaB"></span></td></tr>
                        <tr><td>Gol Fatti (Trasferta)</td><td><span id="golFattiTrasfertaB"></span></td></tr>
                        <tr><td>Gol Subiti (Trasferta)</td><td><span id="golSubitiTrasfertaB"></span></td></tr>
                        <tr><td>% Vittorie (Trasferta)</td><td><span id="vittorieTrasfertaB"></span></td></tr>
                        <tr><td>% Pareggi (Trasferta)</td><td><span id="pareggiTrasfertaB"></span></td></tr>
                        <tr><td>% Sconfitte (Trasferta)</td><td><span id="sconfitteTrasfertaB"></span></td></tr>
                        <tr><td>Peso Posizione</td><td><span id="pesoPosizioneB"></span></td></tr>
                        <tr><td>Forma Recente</td><td><span id="formaB"></span></td></tr>
                        <tr><td>Punteggio Generale</td><td><span id="punteggioB"></span></td></tr>
                        <tr><td>Punteggio Casa/Trasferta</td><td><span id="punteggioCasaB"></span></td></tr>
                        <tr><td>Punteggio Totale</td><td><span id="punteggioTotaleB"></span></td></tr>
                        <tr><td>Punteggio Coppe</td><td><span id="punteggioCoppeB"></span></td></tr>
                    </tbody>
                </table>
            </div>
            <h3>Percentuali Esiti</h3>
            <table id="percentualiEsiti">
                <thead>
                    <tr>
                        <th>Esito</th>
                        <th id="colonnaSquadraA">Squadra A</th>
                        <th id="colonnaSquadraB">Squadra B</th>
                        <th>Totale (12 partite)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Gol</td><td><span id="golA"></span></td><td><span id="golB"></span></td><td><span id="golTot"></span></td></tr>
                    <tr><td>NoGol</td><td><span id="nogolA"></span></td><td><span id="nogolB"></span></td><td><span id="nogolTot"></span></td></tr>
                    <tr><td>Over 2.5</td><td><span id="over25A"></span></td><td><span id="over25B"></span></td><td><span id="over25Tot"></span></td></tr>
                    <tr><td>Under 2.5</td><td><span id="under25A"></span></td><td><span id="under25B"></span></td><td><span id="under25Tot"></span></td></tr>
                    <tr><td>Over 3.5</td><td><span id="over35A"></span></td><td><span id="over35B"></span></td><td><span id="over35Tot"></span></td></tr>
                    <tr><td>Under 3.5</td><td><span id="under35A"></span></td><td><span id="under35B"></span></td><td><span id="under35Tot"></span></td></tr>
                    <tr><td>Over 4.5</td><td><span id="over45A"></span></td><td><span id="over45B"></span></td><td><span id="over45Tot"></span></td></tr>
                    <tr><td>Under 4.5</td><td><span id="under45A"></span></td><td><span id="under45B"></span></td><td><span id="under45Tot"></span></td></tr>
                    <tr><td>Multigol 1-3</td><td><span id="mg13A"></span></td><td><span id="mg13B"></span></td><td><span id="mg13Tot"></span></td></tr>
                    <tr><td>Multigol 2-4</td><td><span id="mg24A"></span></td><td><span id="mg24B"></span></td><td><span id="mg24Tot"></span></td></tr>
                    <tr><td>Multigol 3-5</td><td><span id="mg35A"></span></td><td><span id="mg35B"></span></td><td><span id="mg35Tot"></span></td></tr>
                </tbody>
            </table>
        </section>

        <!-- Tabella delle Partite Salvate -->
        <section id="partiteSalvati">
            <h2>Partite Salvate</h2>
            <table id="tabellaPartiteSalvati">
                <thead>
                    <tr>
                        <th>Squadre</th>
                        <th>Data</th>
                        <th>Giocata</th>
                        <th>Risultato</th>
                        <th>Esito</th>
                    </tr>
                </thead>
                <tbody id="partiteSalvatiBody">
                    <!-- Riempito dinamicamente via JavaScript -->
                </tbody>
            </table>
        </section>
    </div>
    <script src="script.js"></script>
    <!-- Script per registrare il Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrato con successo:', registration);
                    })
                    .catch(error => {
                        console.log('Errore nella registrazione del Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>